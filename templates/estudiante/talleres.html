{% extends 'base.html' %}

{% block contenido %}

{% if not_in_taller %}

{% for taller in talleres %}
<div class="card shadow-sm mb-4">
  <div class="card-header bg-dark text-white">
    {{ taller.nombre }}
  </div>
  <div class="card-body">
    <p class="card-text">
      <strong>Profesor/Tallerista:</strong> {{ taller.profesor_nombre }}<br>
      <strong>Descripción:</strong> {{ taller.descripcion }}<br>
      <strong>Horario:</strong> {{ taller.horarios }}<br>
      <strong>Cupos disponibles:</strong> {{ taller.cupos }}
    </p>
    <form method="POST">
      <input type="hidden" name="taller_id" value="{{ taller._id }}">
      <button type="submit" class="btn btn-success">Solicitar Cupo</button>
    </form>

  </div>
</div>
{% endfor %}

{% endif %}

{% if in_taller %}

<div class="container mt-5">
  <div class="card shadow-sm border-0">
    <div class="card-header bg-dark text-white">
      <h4 class="mb-0">Información del Participante</h4>
    </div>
    <div class="card-body">
      <div class="row mb-3">
        <div class="col-md-4"><strong>Nombres:</strong></div>
        <div class="col-md-8">{{ informacion_rut.nombres }}</div>
      </div>
      <div class="row mb-3">
        <div class="col-md-4"><strong>Apellidos:</strong></div>
        <div class="col-md-8">{{ informacion_rut.apellidos }}</div>
      </div>
      <div class="row mb-3">
        <div class="col-md-4"><strong>RUT:</strong></div>
        <div class="col-md-8">{{ informacion_rut.rut }}</div>
      </div>

      <hr class="my-4">

      <h5 class="text-secondary">Taller Asignado</h5>
      <div class="row mb-3">
        <div class="col-md-4"><strong>Nombre del Taller:</strong></div>
        <div class="col-md-8">{{ informacion_rut.taller.nombre }}</div>
      </div>
      <div class="row mb-3">
        <div class="col-md-4"><strong>Descripción:</strong></div>
        <div class="col-md-8">{{ informacion_rut.taller.descripcion }}</div>
      </div>
      <div class="row mb-3">
        <div class="col-md-4"><strong>Horarios:</strong></div>
        <div class="col-md-8">{{ informacion_rut.taller.horarios }}</div>
      </div>
      <div class="row mb-3">
        <div class="col-md-4"><strong>Profesor:</strong></div>
        <div class="col-md-8">{{ informacion_rut.taller.profesor_nombre }} <br> {{ informacion_rut.taller.profesor_rut
          }}</div>
      </div>

      <hr>

      <div class="row mb-3">
        <div class="col-md-4"><strong>Nota del Taller:</strong></div>
        <div class="col-md-8">
          {% if informacion_rut.nota_taller %}
          {{ informacion_rut.nota_taller }}
          {% else %}
          <em>No hay ninguna nota aún.</em>
          {% endif %}
        </div>
      </div>

      <div class="row mb-3">
        <div class="col-md-4"><strong>Asistencia:</strong></div>
        <div class="col-md-8">
          {% if informacion_rut.lista_taller %}
          <p>Fechas asistidas:</p>
          <ul class="list-group">
            {% for fecha in informacion_rut.lista_taller %}
            <li class="list-group-item">{{ fecha }}</li>
            {% endfor %}
          </ul>
          {% else %}
          <em>No hay asistencia registrada aún.</em>
          {% endif %}
        </div>
      </div>

      <hr>

      <h5 class="text-secondary">Compañeros inscritos en el taller</h5>
      <ul class="list-group">
        {% for compa in informacion_rut.taller.inscritos %}
        <li class="list-group-item">{{ compa.nombre }}</li>
        {% endfor %}
      </ul>


    </div>
  </div>
</div>
</div>
</div>

{% endif %}

{% endblock %}